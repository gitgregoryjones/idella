<style>
	.fa-window-close {
		color:red;
		font-size:20px;
	}

	.fa-pencil-square-o {
		color:yellow;
		font-size:20px;
	}

	.fa-arrow-right, [type=create-site], .fa-calendar, .fa-plus-square, .fa-clock-o, .action-go {
		color:green;
		font-size:20px;
		cursor: pointer;
	}

	.fa-gears {
		color:green;
	}

	.fa-spinner {
		visibility: :hidden;
	}

	#dTrig {
		color:green;
	}

</style>

<form id="settings">


	
	<div class="styleRow" id="row-height">
		<h1>My Sites:</h1>
		<div class="styleLabel">name</div>
			
		

		<div class="styleValue">
			<select name="sitename" id="misc-sitename"></select>

		</div>
	</div>

	<div class="styleRow" id="row-height">
		
		<div class="styleLabel">pages</div>
			
	

		<div class="styleValue">
			<select name="page" id="misc-pages"></select>
			
			<div class="fa fa-window-close"></div>
			<div class="fa fa-pencil-square-o"></div>
			<a href=""><div class="fa fa-download"></div></a>
			
		</div>
		
	</div>

	<hr>
	<p></p>
	<div class="styleRow" id="row-height">
		<h1 id="dTrig">Viewing: </h1>
		<div class="styleLabel" style="vertical-align: top">date&nbsp;&nbsp;<div class=" fa fa-calendar calendar-button"></div></div>

		<div class="styleValue">
			
			<input style="visibility:visible" id="me" name="revision-start-date" class=""  value="">
			<div id="theDate" style="" class="popC"></div>
		</div>
		
			

		<div class="styleValue" >
			
			<!-- <input style="visibility:hidden" id="me" name="revision-start-date" class=""  value=""> //-->
			
		</div>
	</div>
	<div class="styleRow" id="row-height" style="vertical-align: top">
		<h1>&nbsp;</h1>
		<div class="styleLabel">time</div>
			
		

		<div class="styleValue">
			
			<input id="se" name="revision-start-time"   value="">
			
			<span class="action-go">GO<div class="fa fa-caret-right"></div></span>
			
			
		</div>
		
	</div>
	

	
	
<div id="settings" pclass="ui-widget ui-widget-content">
	
	<div class="styleRow" id="row-height">
		<h1>More Options <div class="fa fa-gears"></div></h1>
		<div class="styleLabel"><div>
			
		</div></div>

	</div>

	
		
	</div>

<div id="Advanced" style="display:none;background-color: rebeccapurple; background-color: #047100">
	<p></p>
	<hr>
	<div class="seo-rows">
		<div class="styleRow" id="row-height">
			<h1>SEO Mappings for</h1>
			<div class="styleLabel"><div>
				
			</div>from:</div>

			<div class="styleValue">
				<input type="text" name="from">
			</div>
			
		</div>
		<div class="styleRow" id="row-height">
			<h1 id="misc-sitename-h1"></h1>
			<div class="styleLabel"><div>
				
			</div>to:</div>

			<div class="styleValue">
				<input type="text" name="from">
			</div>
			
		</div>
		<div class="fa fa-plus-square"></div>
<!-- New Row //-->
		<p>
		<div class="styleRow" id="row-height">
			
			<div class="styleLabel"><div>
				
			</div>from:</div>

			<div class="styleValue">
				<input type="text" name="from">
			</div>
			
		</div>
		<div class="styleRow" id="row-height">
			
			<div class="styleLabel"><div>
				
			</div>to:</div>

			<div class="styleValue">
				<input type="text" name="from">
			</div>
			
		</div>
		<div class="fa fa-plus-square"></div>
	</div>
	
		<p></p>
	<hr>
	<div class="styleRow" id="row-height">
		<h1>Create a new Site</h1>
		<div class="styleLabel"><div>
			
		</div></div>

		<div class="styleValue">
			<input name="new-site-name" id="misc-sitename" value="Enter New Name">

		</div>
		<div  type="create-site" class="fa fa-plus-square"></div>
	</div>

	<div class="styleRow" id="row-height">
		
		<div class="styleLabel"><div>
			
		</div>alias</div>

		<div class="styleValue">
			<input name="package-name" id="misc-to" value="Christmas Release">
		</div>
		
	</div>
	<p></p>
	<hr>

	<p></p>
	<div class="styleRow" id="row-height">
		<h1>GitHub</h1>
	<div class="styleLabel"><div>
			
		</div>username</div>

		<div class="styleValue">
			<input name="git-username" id="misc-username" value="idella">
		</div>
	</div>

	<div class="styleRow" id="row-height">
		
		<div class="styleLabel"><div>
			
		</div>password</div>

		<div class="styleValue">
			<input name="git-password" id="misc-password" type="password" value="abcdefg">
		</div>
		
	</div>
<p></p>
	<div class="styleRow" id="row-height">
		<h1>Account</h1>
		<div class="styleLabel"><div>
			
		</div>License Key</div>

		<div class="styleValue">
			<input name="account-license" id="misc-license" value="QW@9181$POP48">
		</div>
	</div>

	<div class="styleRow" id="row-height">
		
		<div class="styleLabel"><div>
			
		</div>expiration</div>

		<div class="styleValue">
			<input name="account-expiration" id="misc-username" readonly value="01/23/2018">
		</div>
		
	</div>
</div>
</div>
<div class="fa fa-spin fa-spinner"></div> 
</form>
<!-- Set data //-->
<script>
var dSimple = new Date($('html').attr('x-current-date'))
$('#dTrig').append((parseFloat(dSimple.getMonth()) +1) + "/" + dSimple.getDate()+ "/" + dSimple.getFullYear())

$('.calendar-button').on('click',function(){
	$("#theDate").datepicker({defaultDate:new Date($('html').first().attr('x-current-date')),onSelect:function(str,instance){

		$( "[name=revision-start-date]" ).val(str).trigger('change');
		$("#theDate").datepicker("destroy")
	}})
})


$('[name=revision-start-date]').on('click',function(){

	$('.calendar-button').click();
})

$('[name=revision-start-date]').on('input',function(){

	$("#theDate").datepicker("setDate",$(this).val())
})


$(".fa-spinner").css({"visibility":"hidden"})

$("#misc-sitename").attr("value",$("title").html())

$("#misc-sitename").on("change",function(){
	window.location = "/" +$("#misc-sitename").find(":selected").attr("value") + "/";
})

$("#misc-pages").on("change",function(){
	window.location = "/" +$("#misc-sitename").find(":selected").attr("value") + "/" + $("#misc-pages").find(":selected").attr("value");
})

$(".fa-download").on('click',function(){
	$(this).parent().attr("href","/download/"+$("#misc-sitename").find(":selected").attr("value"));
	//alert($("#misc-sitename").find(":selected").attr("value"))
})

REVISION_getAllSites(function(ok,payload){

	for(i=0;i< payload.length; i++){
		$("#misc-sitename").append($(new Option(payload[i].name,payload[i].name)))
	}

	opt = $('#misc-sitename option:contains("' + website + '")').prop('selected', true);

	$("#misc-sitename-h1").html(website);

	payload.filter(function(siteInDropDown){

		if(siteInDropDown.name.trim() == opt.val().trim()){
			
			for(i=0; i < siteInDropDown.files.length;i++){
				
				$("#misc-pages").append(new Option(siteInDropDown.files[i],siteInDropDown.files[i]))
			}
			return true;
		} 
	})

	$('#misc-pages option:contains("' + theSiteObj.currentPage.replace("/","") + '")').prop('selected', true);

});


$("[type=create-site]").on("click",function(){

	$(".fa-spinner").css({"visibility":"visible","font-size":"80px","color":"white",left:$(document).width()/2 - $(".fa-spinner").width()/2,top:$(document).height()/2 - $(".fa-spinner").height()/2,position:"absolute"})

	copy = Object.assign({},theSiteObj)
	copy.name = $("[name=new-site-name]").val().replace(" ","-").replace("/","-");

	REVISION_createNewSite(copy,function(){
		$(".fa-spinner").css({"visibility":"hidden"})
		if(confirm("Visit your new site created at " + copy.name)){
			window.location = "/"+ copy.name + "/";
		}
	}); 
})

vardateOn = new Date($('html').first().attr('x-current-date'));

var previewDateStr = vardateOn.getMonth()+1 + "/" + vardateOn.getDate() + "/" + vardateOn.getFullYear();


$("[name=new-site-name]").on('focusin', function() {
	
    this.value = '';
});

$("h1 div.fa-gears").on('click',function(){

	$("#Advanced").toggle();
}).css("cursor","pointer").on("mouseenter",function(){
	$(this).parent().css("color","yellow")
	$(this).css("color","inherit")
}).on("mouseleave",function(){
	$(this).parent().css("color","#047100")
})


	

    $('#se').timepicker().timepicker('option', { useSelect: true });




    $("[name=revision-start-date]").val(previewDateStr )


    $( ".action-go" ).on("click",function(){
    	var hours = new Date($("#se").timepicker('getTime').getTime())
    	var fdate= new Date($( "[name=revision-start-date]" ).val())
    	//alert(fdate)
    	
    	fdate.setHours(hours.getHours())
    	fdate.setMinutes(hours.getMinutes());

    	//alert(fdate)
  		$('meta').first().attr('x-current-date',fdate);
  		//alert($( "[name=revision-start-date]" ).val())
	 
	 	window.location = "/" +$("#misc-sitename").find(":selected").attr("value") + "/" + $("#misc-pages").find(":selected").attr("value")
	  	+ "?xcurrentdate="+fdate; 	
	})



/*
  $("#misc-from").on("change",function(){
  	//alert($(this).val())
  	//theSiteObj.date = $(this).val();
  	$('meta').first().attr('x-current-date',$( "#misc-from" ).datepicker( "getDate" ))
  	window.location = "/" +$("#misc-sitename").find(":selected").attr("value") + "/" + $("#misc-pages").find(":selected").attr("value")
  	+ "?xcurrentdate="+$( "#misc-from" ).datepicker( "getDate" );
  }).val(previewDateStr )*/
 
</script>






